<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GURILA BET</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #060a0d; color: #fff; }
        .selected { background: #00ff88 !important; color: #000 !important; }
    </style>
</head>
<body>
    <header class="p-4 border-b border-gray-800 flex justify-between items-center sticky top-0 bg-[#060a0d] z-50">
        <h1 class="text-xl font-black italic">GURILA<span class="text-green-500">BET</span> ü¶ç</h1>
        <button class="bg-green-600 text-black px-4 py-1 rounded font-bold text-xs">ENTRAR</button>
    </header>

    <main class="p-4 max-w-md mx-auto pb-32">
        <h2 class="text-xs font-bold text-gray-500 mb-4 uppercase italic"><i class="fas fa-futbol text-green-500 mr-2"></i> Futebol - Pr√≥ximos Jogos</h2>
        <div id="lista" class="space-y-4 text-center py-10"><i class="fas fa-spinner fa-spin text-2xl text-green-500"></i></div>
    </main>

    <div id="cart" class="fixed bottom-0 left-0 right-0 bg-[#12171d] p-5 border-t-4 border-green-500 hidden z-50">
        <div id="info" class="mb-4"></div>
        <div class="flex gap-2">
            <input id="valor" type="number" placeholder="R$ Valor" class="flex-1 bg-black border border-gray-700 p-3 rounded-lg outline-none text-white">
            <button onclick="finalizar()" class="bg-green-500 text-black font-black px-6 rounded-lg uppercase italic">Apostar</button>
        </div>
    </div>

    <script>
        const API_URL = 'https://SEU-LINK-DO-RAILWAY.up.railway.app'; // <--- COLOQUE SEU LINK AQUI

        async function carregar() {
            try {
                const res = await fetch(`${API_URL}/api/jogos`);
                const jogos = await res.json();
                document.getElementById('lista').innerHTML = jogos.map(j => `
                    <div class="bg-[#12171d] p-4 rounded-xl border border-gray-800">
                        <p class="text-center font-bold mb-4 uppercase italic text-sm">${j.times}</p>
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="selecionar(this, '${j.times}', 'Casa', ${j.odds.casa})" class="bg-[#1c242c] p-3 rounded-lg text-sm font-bold text-green-500 border border-gray-800 hover:bg-gray-700 transition">${j.odds.casa}</button>
                            <button onclick="selecionar(this, '${j.times}', 'Empate', ${j.odds.empate})" class="bg-[#1c242c] p-3 rounded-lg text-sm font-bold text-green-500 border border-gray-800 hover:bg-gray-700 transition">${j.odds.empate}</button>
                            <button onclick="selecionar(this, '${j.times}', 'Fora', ${j.odds.fora})" class="bg-[#1c242c] p-3 rounded-lg text-sm font-bold text-green-500 border border-gray-800 hover:bg-gray-700 transition">${j.odds.fora}</button>
                        </div>
                    </div>
                `).join('');
            } catch (e) { document.getElementById('lista').innerHTML = "Erro ao carregar jogos."; }
        }

        let aposta = null;
        function selecionar(btn, times, palpite, odd) {
            document.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            aposta = { times, palpite, odd };
            document.getElementById('cart').classList.remove('hidden');
            document.getElementById('info').innerHTML = `<p class="font-bold text-green-500">${times}</p><p class="text-xs uppercase">${palpite} @${odd}</p>`;
        }

        async function finalizar() {
            const v = document.getElementById('valor').value;
            if(!v || v < 2) return alert("M√≠nimo R$ 2,00");
            try {
                const res = await fetch(`${API_URL}/api/finalizar`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({...aposta, valor: v})
                });
                const d = await res.json();
                alert(`BILHETE GERADO!\nC√≥digo: ${d.codigo}\nPr√™mio: R$ ${d.retorno}`);
                location.reload();
            } catch (e) { alert("Erro ao salvar bilhete."); }
        }
        window.onload = carregar;
    </script>
</body>
</html>
