<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GURILA BET | PROFESSIONAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #060a0d; color: #fff; font-family: 'Inter', sans-serif; }
        .league-header { background: #12171d; border-left: 4px solid #00ff88; padding: 12px; font-size: 11px; font-weight: 900; text-transform: uppercase; display: flex; align-items: center; gap: 10px; color: #94a3b8; }
        .match-card { background: #0f141a; border-bottom: 1px solid #1e262f; padding: 15px; display: flex; align-items: center; justify-content: space-between; }
        .odd-btn { background: #1c242c; border: 1px solid #2d3741; border-radius: 6px; width: 50px; height: 42px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 11px; font-weight: 800; color: #00ff88; transition: 0.2s; }
        .odd-btn:hover { background: #2d3741; transform: scale(1.05); }
        .camp-btn { background: #11171e; border: 1px solid #2d3741; padding: 8px 15px; border-radius: 50px; white-space: nowrap; font-size: 10px; font-weight: 900; color: #94a3b8; }
        .camp-btn.active { background: #00ff88; color: #000; border-color: #00ff88; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        /* Estilo dos Mercados Extras */
        .market-box { background: #161b22; border: 1px solid #2d3741; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
        .market-title { font-size: 10px; font-weight: 900; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; border-bottom: 1px solid #2d3741; padding-bottom: 4px; }
        .market-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .market-grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .market-btn { background: #0d1117; color: #fff; padding: 10px; border-radius: 6px; text-align: center; font-size: 11px; font-bold; border: 1px solid #30363d; display: flex; justify-content: space-between; }
        .market-btn span { color: #00ff88; }
    </style>
</head>
<body class="pb-20">
    <header class="p-4 bg-[#0b0f13] border-b border-gray-800 flex justify-between items-center sticky top-0 z-50">
        <h1 class="text-2xl font-black italic uppercase text-white">Gurila<span class="text-green-500">Bet</span> ü¶ç</h1>
    </header>

    <div class="p-3 bg-[#0b0f13] sticky top-[65px] z-40 border-b border-gray-900 overflow-x-auto no-scrollbar flex gap-2" id="menu-campeonatos">
        <button onclick="filtrarLiga('Todos')" class="camp-btn active uppercase">Todos</button>
    </div>

    <main id="container-jogos" class="max-w-3xl mx-auto p-2">
        <div class="text-center py-20 text-gray-600 animate-pulse font-bold uppercase italic text-xs">Carregando Mercados...</div>
    </main>

    <div id="modal-extras" class="fixed inset-0 bg-[#060a0d] z-[600] hidden flex-col">
        <header class="p-4 bg-[#0b0f13] border-b border-gray-800 flex justify-between items-center sticky top-0">
            <div>
                <h3 id="modal-titulo" class="text-xs font-black uppercase text-white"></h3>
                <span class="text-[10px] text-gray-500 font-bold uppercase">Mercados Principais</span>
            </div>
            <button onclick="fecharMercados()" class="w-8 h-8 bg-gray-800 rounded-full text-white flex items-center justify-center font-bold">&times;</button>
        </header>
        <div id="modal-corpo" class="p-3 overflow-y-auto pb-20"></div>
    </div>

    <script>
        const API_URL = 'https://gurilabet-v2-production.up.railway.app'; 
        let todosJogos = [];
        let ligaAtiva = 'Todos';

        function traduzir(texto) {
            const dic = { 'Brazil': 'Brasil', 'England': 'Inglaterra', 'Spain': 'Espanha', 'Italy': 'It√°lia', 'Germany': 'Alemanha', 'France': 'Fran√ßa', 'World': 'Mundial' };
            return dic[texto] || texto;
        }

        async function carregar() {
            try {
                const res = await fetch(`${API_URL}/api/jogos`);
                todosJogos = await res.json();
                renderizarMenuLigas();
                renderizarVitrine();
            } catch (e) {
                document.getElementById('container-jogos').innerHTML = "<p class='text-center py-20 text-red-500 font-bold uppercase'>Erro de Conex√£o</p>";
            }
        }

        function renderizarMenuLigas() {
            const paises = [...new Set(todosJogos.map(j => traduzir(j.pais)))];
            let html = `<button onclick="filtrarLiga('Todos')" class="camp-btn ${ligaAtiva === 'Todos' ? 'active' : ''}">TODOS</button>`;
            paises.forEach(p => {
                html += `<button onclick="filtrarLiga('${p}')" class="camp-btn ${traduzir(ligaAtiva) === p ? 'active' : ''}">${p.toUpperCase()}</button>`;
            });
            document.getElementById('menu-campeonatos').innerHTML = html;
        }

        function filtrarLiga(liga) { ligaAtiva = liga; renderizarMenuLigas(); renderizarVitrine(); }

        function renderizarVitrine() {
            const filtrados = ligaAtiva === 'Todos' ? todosJogos : todosJogos.filter(j => traduzir(j.pais) === ligaAtiva);
            const grupos = {};
            filtrados.forEach(j => {
                const chave = `${traduzir(j.pais)} - ${j.liga}`;
                if(!grupos[chave]) grupos[chave] = [];
                grupos[chave].push(j);
            });

            let html = '';
            for(let ligaNome in grupos) {
                html += `<div class="mb-4 rounded-lg overflow-hidden border border-[#1e262f]"><div class="league-header"><img src="${grupos[ligaNome][0].logo_liga}" class="w-5 h-5 object-contain"><span>${ligaNome}</span></div>`;
                grupos[ligaNome].forEach(j => {
                    const dt = new Date(j.data);
                    html += `
                    <div class="match-card">
                        <div class="text-[10px] text-gray-500 font-bold w-12 text-center leading-tight">
                            ${dt.toLocaleDateString('pt-BR', {day:'2-digit', month:'2-digit'})}<br><span class="text-white text-xs font-black">${dt.toLocaleTimeString('pt-BR', {hour:'2-digit', minute:'2-digit'})}</span>
                        </div>
                        <div class="flex-1 px-4 border-l border-gray-800 ml-2">
                            <div class="flex items-center gap-2 font-bold text-[10px] mb-2 uppercase text-gray-200"><img src="${j.home.logo}" class="w-4 h-4"> ${j.home.name}</div>
                            <div class="flex items-center gap-2 font-bold text-[10px] uppercase text-gray-200"><img src="${j.away.logo}" class="w-4 h-4"> ${j.away.name}</div>
                        </div>
                        <div class="flex gap-1 items-center">
                            <button class="odd-btn"><span class="text-[6px] text-gray-500 mb-0.5">1</span>${j.odds.casa}</button>
                            <button class="odd-btn"><span class="text-[6px] text-gray-500 mb-0.5">X</span>${j.odds.empate}</button>
                            <button class="odd-btn"><span class="text-[6px] text-gray-500 mb-0.5">2</span>${j.odds.fora}</button>
                            <button onclick="abrirMercados(${j.id})" class="w-8 h-10 bg-[#2d3741] hover:bg-green-600 hover:text-black rounded-lg text-white font-black text-xs ml-1 transition flex items-center justify-center">+${Object.keys(j.mercados || {}).length * 3}</button>
                        </div>
                    </div>`;
                });
                html += `</div>`;
            }
            document.getElementById('container-jogos').innerHTML = html;
        }

        function abrirMercados(id) {
            const j = todosJogos.find(item => item.id === id);
            if(!j || !j.mercados) return;

            document.getElementById('modal-titulo').innerText = `${j.home.name} X ${j.away.name}`;
            const m = j.mercados;
            
            let html = `
                <div class="market-box">
                    <div class="market-title">Dupla Chance</div>
                    <div class="market-grid-3">
                        <div class="market-btn">Casa/Empate <span>${m.dupla_chance.casa_empate}</span></div>
                        <div class="market-btn">Casa/Fora <span>${m.dupla_chance.casa_fora}</span></div>
                        <div class="market-btn">Empate/Fora <span>${m.dupla_chance.empate_fora}</span></div>
                    </div>
                </div>

                <div class="market-box">
                    <div class="market-title">Ambas Equipes Marcam</div>
                    <div class="market-grid">
                        <div class="market-btn">Sim <span>${m.ambas_marcam.sim}</span></div>
                        <div class="market-btn">N√£o <span>${m.ambas_marcam.nao}</span></div>
                    </div>
                </div>

                <div class="market-box">
                    <div class="market-title">Total de Gols</div>
                    <div class="market-grid">
                        <div class="market-btn">Mais 1.5 <span>${m.total_gols.mais_15}</span></div>
                        <div class="market-btn">Menos 1.5 <span>${m.total_gols.menos_15}</span></div>
                        <div class="market-btn">Mais 2.5 <span>${m.total_gols.mais_25}</span></div>
                        <div class="market-btn">Menos 2.5 <span>${m.total_gols.menos_25}</span></div>
                        <div class="market-btn">Mais 3.5 <span>${m.total_gols.mais_35}</span></div>
                        <div class="market-btn">Menos 3.5 <span>${m.total_gols.menos_35}</span></div>
                    </div>
                </div>

                <div class="market-box">
                    <div class="market-title">Placar Exato (Principais)</div>
                    <div class="market-grid-3">
                        <div class="market-btn">1-0 <span>${m.placar_exato["1-0"]}</span></div>
                        <div class="market-btn">2-0 <span>${m.placar_exato["2-0"]}</span></div>
                        <div class="market-btn">2-1 <span>${m.placar_exato["2-1"]}</span></div>
                        <div class="market-btn">0-0 <span>${m.placar_exato["0-0"]}</span></div>
                        <div class="market-btn">0-1 <span>${m.placar_exato["0-1"]}</span></div>
                        <div class="market-btn">Outros <span>--</span></div>
                    </div>
                </div>

                <div class="market-box">
                    <div class="market-title">Resultado no Intervalo</div>
                    <div class="market-grid-3">
                        <div class="market-btn">Casa <span>${m.intervalo.casa_ht}</span></div>
                        <div class="market-btn">Empate <span>${m.intervalo.empate_ht}</span></div>
                        <div class="market-btn">Fora <span>${m.intervalo.fora_ht}</span></div>
                    </div>
                </div>

                <div class="market-box">
                    <div class="market-title">Escanteios</div>
                    <div class="market-grid">
                        <div class="market-btn">Mais de 8.0 <span>${m.escanteios.mais_8}</span></div>
                        <div class="market-btn">Mais de 10.0 <span>${m.escanteios.mais_10}</span></div>
                    </div>
                </div>`;
            
            document.getElementById('modal-corpo').innerHTML = html;
            document.getElementById('modal-extras').classList.remove('hidden');
            document.getElementById('modal-extras').classList.add('flex');
        }

        function fecharMercados() { document.getElementById('modal-extras').classList.add('hidden'); }
        window.onload = carregar;
    </script>
</body>
</html>
